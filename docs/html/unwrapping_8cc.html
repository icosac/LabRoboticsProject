<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LabRoboticsProject: src/unwrapping.cc File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LabRoboticsProject
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">unwrapping.cc File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="unwrapping_8hh_source.html">unwrapping.hh</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for unwrapping.cc:</div>
<div class="dyncontent">
<div class="center"><img src="unwrapping_8cc__incl.png" border="0" usemap="#src_2unwrapping_8cc" alt=""/></div>
<map name="src_2unwrapping_8cc" id="src_2unwrapping_8cc">
<area shape="rect"  title=" " alt="" coords="905,5,1033,31"/>
<area shape="rect"  href="unwrapping_8hh.html" title=" " alt="" coords="915,79,1023,104"/>
<area shape="rect"  href="utils_8hh.html" title=" " alt="" coords="1093,445,1157,471"/>
<area shape="rect"  title=" " alt="" coords="1747,519,1820,544"/>
<area shape="rect"  title=" " alt="" coords="413,519,557,544"/>
<area shape="rect"  title=" " alt="" coords="5,519,133,544"/>
<area shape="rect"  title=" " alt="" coords="1348,519,1491,544"/>
<area shape="rect"  title=" " alt="" coords="157,519,322,544"/>
<area shape="rect"  href="settings_8hh.html" title=" " alt="" coords="926,299,1012,324"/>
<area shape="rect"  title=" " alt="" coords="455,445,512,471"/>
<area shape="rect"  title=" " alt="" coords="377,445,431,471"/>
<area shape="rect"  href="detection_8hh.html" title=" " alt="" coords="922,152,1016,177"/>
<area shape="rect"  title=" " alt="" coords="1832,225,1898,251"/>
<area shape="rect"  title=" " alt="" coords="2024,152,2167,177"/>
<area shape="rect"  title=" " alt="" coords="687,519,755,544"/>
<area shape="rect"  title=" " alt="" coords="1159,519,1238,544"/>
<area shape="rect"  title=" " alt="" coords="1262,519,1324,544"/>
<area shape="rect"  title=" " alt="" coords="779,519,970,544"/>
<area shape="rect"  title=" " alt="" coords="994,519,1051,544"/>
<area shape="rect"  title=" " alt="" coords="1075,519,1135,544"/>
<area shape="rect"  href="filter_8hh.html" title=" " alt="" coords="1365,372,1429,397"/>
<area shape="rect"  href="maths_8hh.html" title=" " alt="" coords="740,372,816,397"/>
<area shape="rect"  title=" " alt="" coords="840,372,997,397"/>
<area shape="rect"  title=" " alt="" coords="1021,372,1087,397"/>
<area shape="rect"  title=" " alt="" coords="740,445,798,471"/>
<area shape="rect"  title=" " alt="" coords="872,445,938,471"/>
<area shape="rect"  title=" " alt="" coords="962,445,1014,471"/>
<area shape="rect"  href="configure_8hh.html" title=" " alt="" coords="1367,225,1462,251"/>
<area shape="rect"  title=" " alt="" coords="1164,225,1240,251"/>
<area shape="rect"  title=" " alt="" coords="1468,299,1617,324"/>
<area shape="rect"  title=" " alt="" coords="1640,299,1796,324"/>
<area shape="rect"  href="camera__capture_8hh.html" title=" " alt="" coords="1504,372,1640,397"/>
<area shape="rect"  title=" " alt="" coords="1568,445,1629,471"/>
</map>
</div>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a3c7ffff21a9a31fea3e9777b02d09291"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unwrapping_8cc.html#a3c7ffff21a9a31fea3e9777b02d09291">AREA_RATIO</a>&#160;&#160;&#160;0.7</td></tr>
<tr class="separator:a3c7ffff21a9a31fea3e9777b02d09291"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2f75959ffa14bc8fd8d0491e890c122"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unwrapping_8cc.html#ac2f75959ffa14bc8fd8d0491e890c122">AREA_MIN</a>&#160;&#160;&#160;500</td></tr>
<tr class="separator:ac2f75959ffa14bc8fd8d0491e890c122"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abf82b59ef33c7549580276e00ae85d18"><td class="memItemLeft" align="right" valign="top">static double&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unwrapping_8cc.html#abf82b59ef33c7549580276e00ae85d18">distance</a> (Point c1, Point c2)</td></tr>
<tr class="memdesc:abf82b59ef33c7549580276e00ae85d18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compute the euclidean distance.  <a href="#abf82b59ef33c7549580276e00ae85d18">More...</a><br /></td></tr>
<tr class="separator:abf82b59ef33c7549580276e00ae85d18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac041ab9990eb25243d6e5da1e3d47e96"><td class="memItemLeft" align="right" valign="top"><a class="el" href="draw_8hh.html#aa620a13339ac3a1177c86edc549fda9b">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unwrapping_8cc.html#ac041ab9990eb25243d6e5da1e3d47e96">unwrapping</a> (const bool _imgRead, Mat *img)</td></tr>
<tr class="memdesc:ac041ab9990eb25243d6e5da1e3d47e96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Take some images according to a xml and unwrap the black rectangle inside the image after appling undistortion trasformation.  <a href="#ac041ab9990eb25243d6e5da1e3d47e96">More...</a><br /></td></tr>
<tr class="separator:ac041ab9990eb25243d6e5da1e3d47e96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0327df69102bf644a011c245ae7ad4f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unwrapping_8cc.html#ac0327df69102bf644a011c245ae7ad4f">createPointsHigh</a> (const vector&lt; Point &gt; &amp;rectLow, vector&lt; Point &gt; &amp;rectHigh)</td></tr>
<tr class="memdesc:ac0327df69102bf644a011c245ae7ad4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store in the given vector the white corners in the same order as the given black ones.  <a href="#ac0327df69102bf644a011c245ae7ad4f">More...</a><br /></td></tr>
<tr class="separator:ac0327df69102bf644a011c245ae7ad4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac30b4dbae9022e84e10ef97ba156c581"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unwrapping_8cc.html#ac30b4dbae9022e84e10ef97ba156c581">find_rect</a> (vector&lt; Point &gt; &amp;_rect, const <a class="el" href="draw_8hh.html#aa620a13339ac3a1177c86edc549fda9b">int</a> &amp;width, const <a class="el" href="draw_8hh.html#aa620a13339ac3a1177c86edc549fda9b">int</a> &amp;height)</td></tr>
<tr class="memdesc:ac30b4dbae9022e84e10ef97ba156c581"><td class="mdescLeft">&#160;</td><td class="mdescRight">Since the border of the arena might not always be clean but might have some imperfection, this functions computes the four vertixes taking all the points and computing the four that are the clostest to the corner of the image.  <a href="#ac30b4dbae9022e84e10ef97ba156c581">More...</a><br /></td></tr>
<tr class="separator:ac30b4dbae9022e84e10ef97ba156c581"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cf7df08897ed4d1a7ddcf055b18cca8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unwrapping_8cc.html#a3cf7df08897ed4d1a7ddcf055b18cca8">loadCoefficients</a> (const string filename, Mat &amp;camera_matrix, Mat &amp;dist_coeffs)</td></tr>
<tr class="memdesc:a3cf7df08897ed4d1a7ddcf055b18cca8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load coefficients from a file.  <a href="#a3cf7df08897ed4d1a7ddcf055b18cca8">More...</a><br /></td></tr>
<tr class="separator:a3cf7df08897ed4d1a7ddcf055b18cca8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ac2f75959ffa14bc8fd8d0491e890c122"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2f75959ffa14bc8fd8d0491e890c122">&#9670;&nbsp;</a></span>AREA_MIN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AREA_MIN&#160;&#160;&#160;500</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3c7ffff21a9a31fea3e9777b02d09291"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c7ffff21a9a31fea3e9777b02d09291">&#9670;&nbsp;</a></span>AREA_RATIO</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AREA_RATIO&#160;&#160;&#160;0.7</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ac0327df69102bf644a011c245ae7ad4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0327df69102bf644a011c245ae7ad4f">&#9670;&nbsp;</a></span>createPointsHigh()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void createPointsHigh </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; Point &gt; &amp;&#160;</td>
          <td class="paramname"><em>rectLow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; Point &gt; &amp;&#160;</td>
          <td class="paramname"><em>rectHigh</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store in the given vector the white corners in the same order as the given black ones. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rectLow</td><td>A vector where the low corners of the rectangle (black markers position) are stored. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rectHigh</td><td>A vector where the high corners of the rectangle (white markers position) will be stored. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="abf82b59ef33c7549580276e00ae85d18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf82b59ef33c7549580276e00ae85d18">&#9670;&nbsp;</a></span>distance()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static double distance </td>
          <td>(</td>
          <td class="paramtype">Point&#160;</td>
          <td class="paramname"><em>c1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Point&#160;</td>
          <td class="paramname"><em>c2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Compute the euclidean distance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">c1</td><td>The first point. </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">c2</td><td>The second point.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The euclidean distance. </dd></dl>

</div>
</div>
<a id="ac30b4dbae9022e84e10ef97ba156c581"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac30b4dbae9022e84e10ef97ba156c581">&#9670;&nbsp;</a></span>find_rect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void find_rect </td>
          <td>(</td>
          <td class="paramtype">vector&lt; Point &gt; &amp;&#160;</td>
          <td class="paramname"><em>_rect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="draw_8hh.html#aa620a13339ac3a1177c86edc549fda9b">int</a> &amp;&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="draw_8hh.html#aa620a13339ac3a1177c86edc549fda9b">int</a> &amp;&#160;</td>
          <td class="paramname"><em>height</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Since the border of the arena might not always be clean but might have some imperfection, this functions computes the four vertixes taking all the points and computing the four that are the clostest to the corner of the image. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_rect</td><td>The vector of cv::Point to work on. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">width</td><td>The width of the image. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">height</td><td>The height of the image. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3cf7df08897ed4d1a7ddcf055b18cca8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cf7df08897ed4d1a7ddcf055b18cca8">&#9670;&nbsp;</a></span>loadCoefficients()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loadCoefficients </td>
          <td>(</td>
          <td class="paramtype">const string&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Mat &amp;&#160;</td>
          <td class="paramname"><em>camera_matrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Mat &amp;&#160;</td>
          <td class="paramname"><em>dist_coeffs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load coefficients from a file. </p>
<p>Load two matrix 'camera_matrix' and 'distortion_coefficients' from the xml file passed. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">filename</td><td>The string that identify the location of the xml file. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">camera_matrix</td><td>Where the 'camera_matrix' matrix is saved. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dist_coeffs</td><td>Where the 'distortion_coefficients' matrix is saved. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac041ab9990eb25243d6e5da1e3d47e96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac041ab9990eb25243d6e5da1e3d47e96">&#9670;&nbsp;</a></span>unwrapping()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="draw_8hh.html#aa620a13339ac3a1177c86edc549fda9b">int</a> unwrapping </td>
          <td>(</td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>_imgRead</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>img</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Take some images according to a xml and unwrap the black rectangle inside the image after appling undistortion trasformation. </p>
<p>Load from the xml file 'data/settings.xml' the name of some images, load the images from the file,<br />
apply the calibration (undistortion trasformation) thanks to the matrices load with the 'loadCoefficients' function.<br />
Then, with the use of a filter for the black the region of interest (a rectangle) is identified and all the perspective is rotated for reach a top view of the rectangle.<br />
Finally, the images are saved on some files.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_imgRead</td><td>Boolean flag that says if load or not the image from file, or as a function parameter. In addition, also the return procedure change if true the image is saved on the disk otherwise is saved on the img function parameter. True=load and store on file. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">[in/out]</td><td>img The image that eventually is loaded from the function. And the one that will be modified for returning the elaborated frame. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A 0 is return if the function reach the end. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
