<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.15"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LabRoboticsProject: src/include/unwrapping.hh File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LabRoboticsProject
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.15 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_b0856f6b0d80ccb263b2f415c91f9e17.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">unwrapping.hh File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="utils_8hh_source.html">utils.hh</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="settings_8hh_source.html">settings.hh</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="detection_8hh_source.html">detection.hh</a>&gt;</code><br />
<code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;fstream&gt;</code><br />
<code>#include &lt;string&gt;</code><br />
<code>#include &lt;cmath&gt;</code><br />
<code>#include &lt;opencv2/videoio.hpp&gt;</code><br />
<code>#include &lt;opencv2/highgui.hpp&gt;</code><br />
<code>#include &lt;opencv2/core.hpp&gt;</code><br />
<code>#include &lt;opencv2/opencv.hpp&gt;</code><br />
<code>#include &lt;opencv2/imgcodecs.hpp&gt;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for unwrapping.hh:</div>
<div class="dyncontent">
<div class="center"><img src="unwrapping_8hh__incl.png" border="0" usemap="#src_2include_2unwrapping_8hh" alt=""/></div>
<map name="src_2include_2unwrapping_8hh" id="src_2include_2unwrapping_8hh">
<area shape="rect"  title=" " alt="" coords="1378,5,1554,31"/>
<area shape="rect"  href="utils_8hh.html" title=" " alt="" coords="1441,372,1504,397"/>
<area shape="rect"  title=" " alt="" coords="251,445,323,471"/>
<area shape="rect"  title=" " alt="" coords="1654,445,1798,471"/>
<area shape="rect"  title=" " alt="" coords="1822,445,1949,471"/>
<area shape="rect"  title=" " alt="" coords="918,445,1061,471"/>
<area shape="rect"  title=" " alt="" coords="1974,445,2139,471"/>
<area shape="rect"  href="settings_8hh.html" title=" " alt="" coords="610,225,695,251"/>
<area shape="rect"  title=" " alt="" coords="62,372,120,397"/>
<area shape="rect"  title=" " alt="" coords="660,372,714,397"/>
<area shape="rect"  href="detection_8hh.html" title=" " alt="" coords="1419,79,1513,104"/>
<area shape="rect"  title=" " alt="" coords="1833,152,1899,177"/>
<area shape="rect"  title=" " alt="" coords="2126,79,2270,104"/>
<area shape="rect"  title=" " alt="" coords="347,445,416,471"/>
<area shape="rect"  title=" " alt="" coords="1465,445,1544,471"/>
<area shape="rect"  title=" " alt="" coords="1568,445,1630,471"/>
<area shape="rect"  title=" " alt="" coords="1085,445,1276,471"/>
<area shape="rect"  title=" " alt="" coords="1300,445,1357,471"/>
<area shape="rect"  title=" " alt="" coords="1381,445,1441,471"/>
<area shape="rect"  href="filter_8hh.html" title=" " alt="" coords="1323,299,1387,324"/>
<area shape="rect"  href="maths_8hh.html" title=" " alt="" coords="297,299,373,324"/>
<area shape="rect"  title=" " alt="" coords="397,299,554,324"/>
<area shape="rect"  title=" " alt="" coords="578,299,644,324"/>
<area shape="rect"  title=" " alt="" coords="741,372,799,397"/>
<area shape="rect"  title=" " alt="" coords="473,372,538,397"/>
<area shape="rect"  title=" " alt="" coords="397,372,449,397"/>
<area shape="rect"  href="configure_8hh.html" title=" " alt="" coords="1292,152,1386,177"/>
<area shape="rect"  title=" " alt="" coords="1580,152,1656,177"/>
<area shape="rect"  title=" " alt="" coords="972,152,1024,177"/>
<area shape="rect"  title=" " alt="" coords="973,225,1122,251"/>
<area shape="rect"  title=" " alt="" coords="1145,225,1301,251"/>
<area shape="rect"  href="camera__capture_8hh.html" title=" " alt="" coords="1019,299,1155,324"/>
<area shape="rect"  title=" " alt="" coords="989,372,1049,397"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="unwrapping_8hh__dep__incl.png" border="0" usemap="#src_2include_2unwrapping_8hhdep" alt=""/></div>
<map name="src_2include_2unwrapping_8hhdep" id="src_2include_2unwrapping_8hhdep">
<area shape="rect"  title=" " alt="" coords="388,5,565,31"/>
<area shape="rect"  href="unwrapping_8cc.html" title=" " alt="" coords="5,85,134,111"/>
<area shape="rect"  href="detection_8hh.html" title=" " alt="" coords="396,85,557,111"/>
<area shape="rect"  href="robot_project_8hh.html" title=" " alt="" coords="149,239,329,264"/>
<area shape="rect"  href="main_8cc.html" title=" " alt="" coords="671,239,783,264"/>
<area shape="rect"  href="unwrapping__run_8cc.html" title=" " alt="" coords="868,79,1002,117"/>
<area shape="rect"  href="detection_8cc.html" title=" " alt="" coords="209,165,323,191"/>
<area shape="rect"  href="planning_8hh.html" title=" " alt="" coords="398,165,555,191"/>
<area shape="rect"  href="detection__run_8cc.html" title=" " alt="" coords="629,165,793,191"/>
<area shape="rect"  href="planning_8cc.html" title=" " alt="" coords="353,239,464,264"/>
<area shape="rect"  href="planning__run_8cc.html" title=" " alt="" coords="487,239,647,264"/>
<area shape="rect"  href="robot_project_8cc.html" title=" " alt="" coords="173,312,305,337"/>
</map>
</div>
</div>
<p><a href="unwrapping_8hh_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a9497176b75c2f48a3a110adce953312f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="draw_8hh.html#aa620a13339ac3a1177c86edc549fda9b">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unwrapping_8hh.html#a9497176b75c2f48a3a110adce953312f">unwrapping</a> (const bool _imgRead=true, Mat *img=nullptr)</td></tr>
<tr class="memdesc:a9497176b75c2f48a3a110adce953312f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Take some images according to a xml and unwrap the black rectangle inside the image after appling undistortion trasformation.  <a href="#a9497176b75c2f48a3a110adce953312f">More...</a><br /></td></tr>
<tr class="separator:a9497176b75c2f48a3a110adce953312f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0327df69102bf644a011c245ae7ad4f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unwrapping_8hh.html#ac0327df69102bf644a011c245ae7ad4f">createPointsHigh</a> (const vector&lt; Point &gt; &amp;rectLow, vector&lt; Point &gt; &amp;rectHigh)</td></tr>
<tr class="memdesc:ac0327df69102bf644a011c245ae7ad4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store in the given vector the white corners in the same order as the given black ones.  <a href="#ac0327df69102bf644a011c245ae7ad4f">More...</a><br /></td></tr>
<tr class="separator:ac0327df69102bf644a011c245ae7ad4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cf7df08897ed4d1a7ddcf055b18cca8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unwrapping_8hh.html#a3cf7df08897ed4d1a7ddcf055b18cca8">loadCoefficients</a> (const string filename, Mat &amp;camera_matrix, Mat &amp;dist_coeffs)</td></tr>
<tr class="memdesc:a3cf7df08897ed4d1a7ddcf055b18cca8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load coefficients from a file.  <a href="#a3cf7df08897ed4d1a7ddcf055b18cca8">More...</a><br /></td></tr>
<tr class="separator:a3cf7df08897ed4d1a7ddcf055b18cca8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac30b4dbae9022e84e10ef97ba156c581"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unwrapping_8hh.html#ac30b4dbae9022e84e10ef97ba156c581">find_rect</a> (vector&lt; Point &gt; &amp;_rect, const <a class="el" href="draw_8hh.html#aa620a13339ac3a1177c86edc549fda9b">int</a> &amp;width, const <a class="el" href="draw_8hh.html#aa620a13339ac3a1177c86edc549fda9b">int</a> &amp;height)</td></tr>
<tr class="memdesc:ac30b4dbae9022e84e10ef97ba156c581"><td class="mdescLeft">&#160;</td><td class="mdescRight">Since the border of the arena might not always be clean but might have some imperfection, this functions computes the four vertixes taking all the points and computing the four that are the clostest to the corner of the image.  <a href="#ac30b4dbae9022e84e10ef97ba156c581">More...</a><br /></td></tr>
<tr class="separator:ac30b4dbae9022e84e10ef97ba156c581"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="ac0327df69102bf644a011c245ae7ad4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0327df69102bf644a011c245ae7ad4f">&#9670;&nbsp;</a></span>createPointsHigh()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void createPointsHigh </td>
          <td>(</td>
          <td class="paramtype">const vector&lt; Point &gt; &amp;&#160;</td>
          <td class="paramname"><em>rectLow</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; Point &gt; &amp;&#160;</td>
          <td class="paramname"><em>rectHigh</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store in the given vector the white corners in the same order as the given black ones. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rectLow</td><td>A vector where the low corners of the rectangle (black markers position) are stored. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rectHigh</td><td>A vector where the high corners of the rectangle (white markers position) will be stored.</td></tr>
  </table>
  </dd>
</dl>
<p>Store in the given vector the white corners in the same order as the given black ones.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">rectLow</td><td>The 4 points that define the black rectangle on the floor. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rectHigh</td><td>The vector that will contain the 4 points that will define the high corner that pass through the white points. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac30b4dbae9022e84e10ef97ba156c581"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac30b4dbae9022e84e10ef97ba156c581">&#9670;&nbsp;</a></span>find_rect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void find_rect </td>
          <td>(</td>
          <td class="paramtype">vector&lt; Point &gt; &amp;&#160;</td>
          <td class="paramname"><em>_rect</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="draw_8hh.html#aa620a13339ac3a1177c86edc549fda9b">int</a> &amp;&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="draw_8hh.html#aa620a13339ac3a1177c86edc549fda9b">int</a> &amp;&#160;</td>
          <td class="paramname"><em>height</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Since the border of the arena might not always be clean but might have some imperfection, this functions computes the four vertixes taking all the points and computing the four that are the clostest to the corner of the image. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_rect</td><td>The vector of cv::Point to work on. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">width</td><td>The width of the image. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">height</td><td>The height of the image.</td></tr>
  </table>
  </dd>
</dl>
<p>Since the border of the arena might not always be clean but might have some imperfection, this functions computes the four vertixes taking all the points and computing the four that are the clostest to the corner of the image.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">[in/out]</td><td>_rect The vector containing the actual possible points that delimt the rectangle. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">width</td><td>The width of the original image from which the points of the rectangle come from. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">height</td><td>The height of the original image from which the points of the rectangle come from. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3cf7df08897ed4d1a7ddcf055b18cca8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cf7df08897ed4d1a7ddcf055b18cca8">&#9670;&nbsp;</a></span>loadCoefficients()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loadCoefficients </td>
          <td>(</td>
          <td class="paramtype">const string&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Mat &amp;&#160;</td>
          <td class="paramname"><em>camera_matrix</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Mat &amp;&#160;</td>
          <td class="paramname"><em>dist_coeffs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load coefficients from a file. </p>
<p>Load two matrix 'camera_matrix' and 'distortion_coefficients' from the xml file passed. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">filename</td><td>The string that identify the location of the xml file. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">camera_matrix</td><td>Where the 'camera_matrix' matrix is saved. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dist_coeffs</td><td>Where the 'distortion_coefficients' matrix is saved. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a9497176b75c2f48a3a110adce953312f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9497176b75c2f48a3a110adce953312f">&#9670;&nbsp;</a></span>unwrapping()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="draw_8hh.html#aa620a13339ac3a1177c86edc549fda9b">int</a> unwrapping </td>
          <td>(</td>
          <td class="paramtype">const bool&#160;</td>
          <td class="paramname"><em>_imgRead</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Mat *&#160;</td>
          <td class="paramname"><em>img</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Take some images according to a xml and unwrap the black rectangle inside the image after appling undistortion trasformation. </p>
<p>Load from the xml file 'data/settings.xml' the name of some images, load the images from the file,<br />
apply the calibration (undistortion trasformation) thanks to the matrices load with the 'loadCoefficients' function.<br />
Then, with the use of a filter for the black the region of interest (a rectangle) is identified and all the perspective is rotated for reach a top view of the rectangle.<br />
Finally, the images are saved on some files.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">_imgRead</td><td>Boolean flag that says if load or not the image from file, or as a function parameter. In addition, also the return procedure change if true the image is saved on the disk otherwise is saved on the img function parameter. True=load and store on file. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">[in/out]</td><td>img The image that eventually is loaded from the function. And the one that will be modified for returning the elaborated frame. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A 0 is return if the function reach the end. </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.15
</small></address>
</body>
</html>
